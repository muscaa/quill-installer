plugins {
	id "application"
}

mainClassName = "quill.installer.QuillInstaller"
application.setMainClass(mainClassName)

configurations {
    shade {
        canBeResolved = true
        canBeConsumed = true
    }
    
    compileClasspath.extendsFrom(shade)
    runtimeClasspath.extendsFrom(shade)
    testCompileClasspath.extendsFrom(shade)
    testRuntimeClasspath.extendsFrom(shade)
}

repositories {
    mavenCentral()
    maven { url "https://jitpack.io" }
}

dependencies {
    // add dependencies
}

jar {
    into("META-INF") {
        from("${rootProject.projectDir}/LICENSE")
        from("${rootProject.projectDir}/NOTICE")
    }
    
    duplicatesStrategy(DuplicatesStrategy.EXCLUDE)
    dependsOn configurations.shade
    from {
        configurations.shade.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
    
    manifest {
		attributes "Main-Class": mainClassName
	}
}
